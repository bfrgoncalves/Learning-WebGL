<!DOCTYPE html>
<html>
	<canvas id = 'c' width = '400' height = '400' style="border:1px solid #000000;"></canvas>
	<script src = 'webgl-utils.js'></script> <!-- USES THE UTILS DEFINED -->
	<script id = 'vshader' type = 'x-shader'>
		attribute vec3 aVertexPosition;
  		attribute vec4 aVertexColor;
	    varying vec4 vColor;
	    void main() {
	       vColor = aVertexColor;
	       gl_Position = vec4(aVertexPosition, 1.0);
	    }

	</script>
	<script id = 'fshader' type = 'x-shader'>
		precision mediump float;
		varying vec4 vColor;

	    void main() {
	       gl_FragColor = vColor;
	    }
	
	</script>
	<script>

	// var vertices = [
 //    //  Position   Color             Texcoords
 //        -1.0,  1.0, 1.0, 0.0, 0.0, 0.0, 0.0, // Top-left
 //         1.0,  1.0, 0.0, 1.0, 0.0, 1.0, 0.0, // Top-right
 //         1.0, -1.0, 0.0, 0.0, 1.0, 1.0, 1.0, // Bottom-right
 //        -1.0, -1.0, 1.0, 1.0, 1.0, 0.0, 1.0  // Bottom-left
 //    ];

 	var vertices = [
         1.0,  1.0,  0.0,
        -1.0,  1.0,  0.0,
         1.0, -1.0,  0.0,
        -1.0, -1.0,  0.0
    ];

    var colors = [
    	0.5, 0.5, 1.0, 1.0,
    	1.0, 0.5, 1.0, 1.0,
    	0.5, 0.5, 1.0, 1.0,
    	0.5, 1.0, 0.0, 1.0
    ];
    // for (var i=0; i < 4; i++) {
    //   colors = colors.concat([0.5, 0.5, 1.0, 1.0]);
    // }

    console.log(colors);


	var c = document.getElementById('c');
	var gl = c.getContext('experimental-webgl');

	//To create some geometry we need some BUFFER to hold some VERTEX data
	var vertexPosBuffer = gl.createBuffer();
	gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer); //Bind buffer to the Bind point named ARRAY_BUFFER
	gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW); //FLOAT32ARRAY is what we need to pass to the buffer. STATIC_DRAW means that we upload the data 
	vertexPosBuffer.itemSize = 3; //Atributes for the buffer. SIze and number of items
	vertexPosBuffer.numItems = 4;


	var colorbuffer = gl.createBuffer();
	gl.bindBuffer(gl.ARRAY_BUFFER, colorbuffer);

    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);
																				//once and draw it several times
	colorbuffer.itemSize = 4; //Atributes for the buffer. SIze and number of items
	colorbuffer.numItems = 4;


	//Define VERTEX SHADER and FRAGMENT SHADER
	vs = document.getElementById('vshader').textContent;
	fs = document.getElementById('fshader').textContent;


	var program = createProgram(vs,fs);
	gl.useProgram(program);

	program.vertexPosAttrib = gl.getAttribLocation(program,'aVertexPosition');
	gl.enableVertexAttribArray(program.vertexPosAttrib);

	program.vertexColor = gl.getAttribLocation(program,'aVertexColor');
	gl.enableVertexAttribArray(program.vertexColor);

	drawScene();

	function drawScene(){


		gl.vertexAttribPointer(program.vertexPosAttrib, vertexPosBuffer.itemSize, gl.FLOAT, false , 0, 0); 
		gl.vertexAttribPointer(program.vertexColor, colorbuffer.itemSize, gl.FLOAT, false , 0, 0);
		gl.drawArrays(gl.TRIANGLE_STRIP, 0, vertexPosBuffer.numItems);
	}

	</script>


</html>